!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.tex2max=r():e.tex2max=r()}(window,function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=9)}([function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.debug=void 0,r.warn=function(e){console.warn(e)};var t=n(3);r.debug=function(e){(0,t.getOptions)().debugging&&console.debug(e)}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.isEquation=function(e){var r=0;if(e.forEach(function(e){"operator"===e.type&&"="===e.value&&r++}),1===r)return!0;if(r>1)throw new Error("Expression contains more than one equal signs");return!1},r.checkForVariable=function e(r){o.debug("Checking expression "+JSON.stringify(r)+" for variable");var n=!1;if(Array.isArray(r))for(var t=0;t<r.length;t++)if("group"===r[t].type){e(r[t].value)&&(n=!0)}else"variable"===r[t].type&&(n=!0);else n="variable"===r.type;return n},r.buildMaximaFunctionString=function(e,r){var n="";n+=e+"("+r;for(var t=arguments.length,o=Array(t>2?t-2:0),i=2;i<t;i++)o[i-2]=arguments[i];return o.forEach(function(e){!1!==e&&null!==e&&void 0!==e&&(n+=","+e)}),n+=")"},r.searchForOccurrence=function e(r,n,t,o){var i=!1,a=!1,u=[];if(Array.isArray(r))for(var l=0;l<r.length;l++)if("group"===r[l].type&&o){var s=void 0;"type"===n?a=(s=e(r[l].type,"type",t,!0)).isPresent:"value"===n&&(a=(s=e(r[l].value,"value",t,!0)).isPresent),a&&(u.push(s.position),i=!0)}else"type"===n?r[l].type===t&&(i=!0,u.push(l)):"value"===n&&r[l].value===t&&(i=!0,u.push(l));else"type"===n?r.type===t&&(i=!0,u=0):"value"===n?r.value===t&&(i=!0,u=null):i=!1;return{isPresent:i,position:u}},r.wrapForTranspilation=function(e){return Array.isArray(e)?e:"object"===(void 0===e?"undefined":t(e))&&"string"!=typeof e?[e]:void 0},r.stripParenthesis=function(e){var r=e.charAt(0),n=e.charAt(-1);return r.match(/[({\[]/)||n.match(/[)}\]]/)?e.substr(1,e.length-2):e},r.stripAllParenthesis=function(e){return e.replace(/[()]/g,"")};var o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0))},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transpiler=function(e){v.debug("\n------------------ TRANSPILING -> -------------------");var r=(0,f.getOptions)(),n="",m=0;n+="(";for(var b=function(){var f=e[m];switch(f.type){case"operator":!function(){var r=e[m-1];if(0===m&&"+"===f.value)v.debug("Structure starts with +, ignoring");else{if(0===m&&"prefix"!==f.operatorType&&"-"!==f.value)throw new Error("Operator "+f.value+" is not an prefix operator");if("+"===f.value||"-"===f.value)n+=f.value;else if("postfix"===f.operatorType){if("operator"===r.type)throw new Error("Operator "+f.value+" has to be an postfix operator");n+=f.value}else if("prefix"===f.operatorType);else if("infix"===f.operatorType){if("operator"===r.type||"operator"===r.type)throw new Error("Operator "+f.value+" has to be an infix operator");n+=f.value}}if(("infix"===f.operatorType||"prefix"===f.operatorType)&&m===e.length-1)throw new Error("Operator "+f.value+" is an invalid end character.")}();break;case"number":b(m,{type:"number"},{type:"operator",operatorType:"infix"}),n+=f.value;break;case"variable":!function(){var e="";if(b(m,{type:"operator",operatorType:"infix"}),null!==(0,p.getName)(f.value)){var t=(0,p.getName)(f.value);r.onlyGreekSymbol&&(t=(0,p.getSymbol)(t)),v.debug("greek letter "+t),e+=t}else e+=f.value;n+=e}();break;case"group":b(m,{type:"function"},{type:"operator"}),n+=g(f.value);break;case"token":!function(){v.debug("Handling token: "+f.value);var t="",o=m;if(null!==(0,p.getSymbol)(f.value)){var a=f.value;r.onlyGreekSymbol&&(a=(0,p.getSymbol)(a)),v.debug("greek letter "+a),t+=a}if(null!==(0,p.getName)(f.value)){var u=f.value;r.onlyGreekName&&(u=(0,p.getName)(u)),v.debug("greek letter "+u),t+=u}if((0,i.isMacro)(f.value)){var l=i.MACROS.get(f.value);null===l?v.debug("Skipping macro "+f.value):void 0!==l&&(v.debug("Adding macro "+l),t+=l)}if("frac"===f.value){if("group"!==e[m+1].type||"group"!==e[m+2].type)throw new Error("Fraction must have 2 following parameters");v.debug("Found fraction"),t+=g(e[m+1].value)+"/"+g(e[m+2].value),m+=2}o>0&&""!==t&&((0,i.isMacro)(f.value)||(0,p.isGreekLetter)(f.value))&&b(o,{type:"operator"}),n+=t}();break;case"function":!function(){if(b(m,{type:"operator"}),e[m+1],"sqrt"===f.value){if("group"!==e[m+1].type)throw new Error("Square root must be followed by [] or {}");var r="";if("square"===e[m+1].symbol&&"group"===e[m+2].type){v.debug("Found function nth-square root");var t=g(e[m+1].value);r+=g(e[m+2].value),r+="^(1/"+t+")",m++}else n+=f.value,v.debug("Found function square root"),r+=g(e[m+1].value);n+=r,m++}else"lim"===f.value?(v.debug('Found function "limit"'),function(){var r,t="";if("_"!==e[m+1].value||"group"!==e[m+2].type)throw new Error('Limit must have a "from" and "to" value');var i=e[m+2].value;if(i=(0,c.handleLimitArguments)(i),void 0===e[m+3])throw new Error("Missing argument in limit");var a=(0,o.getExpressionLength)(e.slice(m+3));t+=g(e.slice(m+3,m+3+a)),m+=a-1,r=(0,u.buildMaximaFunctionString)("limit",t,i.variable,i.value,i.direction),m+=3,n+=r}()):"binom"===f.value?(v.debug('Found function "binomial"'),function(){var r="",t="",o="",i=e[m+1].type,a=e[m+2].type;if("group"!==i||"group"!==a)throw new Error("Binomial must have 2 following groups");t+=g(e[m+1].value),o+=g(e[m+2].value),r+=(0,u.buildMaximaFunctionString)("binomial",t,o),n+=r,m+=2}()):"sum"===f.value?(v.debug('Found function "sum"'),function(){var r,t,i,a="",l="";if("_"!==e[m+1].value&&"^"!==e[m+1].value)throw new Error("Sum does not contain the correct number of arguments");var c=(0,s.handleUpperAndLowerArgsSum)(e.slice(m+1)),f=c.lowerLimit.value;if(t=c.upperLimit,m+=4,i=(f=(0,s.handleLowerSumArguments)(f)).variable,r=f.value,v.debug("Sum: arguments are form "+r+" to "+t),void 0===e[m+1])throw new Error("Missing argument in sum");var p=(0,o.getExpressionLength)(e.slice(m+1));l+=g(e.slice(m+1,m+1+p)),m+=p,a+=(0,u.buildMaximaFunctionString)("sum",l,i,r,t),n+=a}()):"integral"===f.value?(v.debug('Found function "integral"'),function(){var r,t="",i="",a=void 0,s=void 0,c="",f=!1;if((0,o.assertNotUndefined)(e[m+1],"Missing argument in integral"),"_"!==e[m+1].value&&"^"!==e[m+1].value)v.debug("Integral is symbolic"),f=!0,m++;else{var p=e.slice(m+1,m+5),d=(0,l.handleUpperAndLowerArgs)(p);a=d.lowerLimit,s=d.upperLimit,v.debug("Integration limits are from "+a+" to "+s),m+=5}var b=(0,l.findIntegralEnd)(e.slice(m));c+=b.variable,r=b.length;var y=e.slice(m,m+r);(0,o.assertNotUndefined)(y[y.length-1],"Missing argument in integral"),"*"===y[y.length-1].value&&y.splice(-1,1),i+=g(y),m+=r,t+=f?(0,u.buildMaximaFunctionString)("integrate",i,c):(0,u.buildMaximaFunctionString)("integrate",i,c,a,s),n+=t}()):(v.debug('Found normal "function"'),function(){var r="",t=!1,i=void 0,a=f.value;if((0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a),"^"===e[m+1].value){if(t=!0,(0,o.assertNotUndefined)(e[m+2],"Missing argument in function: "+a+"^"),i=g((0,u.wrapForTranspilation)(e[m+2])),i=(0,u.stripParenthesis)(i),"-1"===(0,u.stripAllParenthesis)(i)){if(v.debug("Function is inverse"),t=!1,!(0,d.isTrigonometricFunction)(a))throw new Error('Function "'+a+'" is not an trigonometric function');var l=(0,d.getInverseTrigonometricFunction)(a);if(null===l)throw new Error("No inverse trigonometric function found for "+a);a=l}m+=2}r+=a,t?(0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a+"^"+g((0,u.wrapForTranspilation)(e[m]))):(0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a);var s=(0,o.getExpressionLength)(e.slice(m+1));r+=g((0,u.wrapForTranspilation)(e.slice(m+1,m+1+s))),m+=s-1,t&&(r="("+r+")^"+i),m++,n+=r}())}();break;case"environment":!function(){if("begin"===f.state){b(m,{type:"operator"});var r="",o=(0,t.environmentLength)(e.slice(m));"matrix"===f.value&&(v.debug("Found matrix environment"),r+=(0,a.handleMatrix)(e.slice(m+1,m+1+o))),m+=o+1,n+=r}else"end"===f.state&&m++}()}function b(t){var o=e[t-1],i=!0;if(t>0){for(var a=arguments.length,u=Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];u.forEach(function(e){var r=!0;for(var n in e)e.hasOwnProperty(n)&&o[n]!==e[n]&&(r=!1);!0===r&&(i=!1)}),r.addTimesSign&&i&&(v.debug("Adding * before "+f.type+": "+f.value+", previous item: "+e[t-1].type),n+="*")}}};m<e.length;m++)b();if(/(\([ ]*\))/.test(n+=")"))throw new Error("Syntax error");if(""===n)throw new Error("EMPTY");return n};var t=n(16),o=n(5),i=n(6),a=n(17),u=n(1),l=n(18),s=n(19),c=n(20),f=n(3),v=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0)),p=n(8),d=n(7);function g(e){v.debug("\n------------------ TRANSPILING -> -------------------");var r=(0,f.getOptions)(),n="",m=0;n+="(";for(var b=function(){var f=e[m];switch(f.type){case"operator":!function(){var r=e[m-1];if(0===m&&"+"===f.value)v.debug("Structure starts with +, ignoring");else{if(0===m&&"prefix"!==f.operatorType&&"-"!==f.value)throw new Error("Operator "+f.value+" is not an prefix operator");if("+"===f.value||"-"===f.value)n+=f.value;else if("postfix"===f.operatorType){if("operator"===r.type)throw new Error("Operator "+f.value+" has to be an postfix operator");n+=f.value}else if("prefix"===f.operatorType);else if("infix"===f.operatorType){if("operator"===r.type||"operator"===r.type)throw new Error("Operator "+f.value+" has to be an infix operator");n+=f.value}}if(("infix"===f.operatorType||"prefix"===f.operatorType)&&m===e.length-1)throw new Error("Operator "+f.value+" is an invalid end character.")}();break;case"number":b(m,{type:"number"},{type:"operator",operatorType:"infix"}),n+=f.value;break;case"variable":!function(){var e="";if(b(m,{type:"operator",operatorType:"infix"}),null!==(0,p.getName)(f.value)){var t=(0,p.getName)(f.value);r.onlyGreekSymbol&&(t=(0,p.getSymbol)(t)),v.debug("greek letter "+t),e+=t}else e+=f.value;n+=e}();break;case"group":b(m,{type:"function"},{type:"operator"}),n+=g(f.value);break;case"token":!function(){v.debug("Handling token: "+f.value);var t="",o=m;if(null!==(0,p.getSymbol)(f.value)){var a=f.value;r.onlyGreekSymbol&&(a=(0,p.getSymbol)(a)),v.debug("greek letter "+a),t+=a}if(null!==(0,p.getName)(f.value)){var u=f.value;r.onlyGreekName&&(u=(0,p.getName)(u)),v.debug("greek letter "+u),t+=u}if((0,i.isMacro)(f.value)){var l=i.MACROS.get(f.value);null===l?v.debug("Skipping macro "+f.value):void 0!==l&&(v.debug("Adding macro "+l),t+=l)}if("frac"===f.value){if("group"!==e[m+1].type||"group"!==e[m+2].type)throw new Error("Fraction must have 2 following parameters");v.debug("Found fraction"),t+=g(e[m+1].value)+"/"+g(e[m+2].value),m+=2}o>0&&""!==t&&((0,i.isMacro)(f.value)||(0,p.isGreekLetter)(f.value))&&b(o,{type:"operator"});n+=t}();break;case"function":!function(){b(m,{type:"operator"});e[m+1];if("sqrt"===f.value){if("group"!==e[m+1].type)throw new Error("Square root must be followed by [] or {}");var r="";if("square"===e[m+1].symbol&&"group"===e[m+2].type){v.debug("Found function nth-square root");var t=g(e[m+1].value);r+=g(e[m+2].value),r+="^(1/"+t+")",m++}else n+=f.value,v.debug("Found function square root"),r+=g(e[m+1].value);n+=r,m++}else"lim"===f.value?(v.debug('Found function "limit"'),function(){var r="",t="";if("_"!==e[m+1].value||"group"!==e[m+2].type)throw new Error('Limit must have a "from" and "to" value');var i=e[m+2].value;if(i=(0,c.handleLimitArguments)(i),void 0===e[m+3])throw new Error("Missing argument in limit");var a=(0,o.getExpressionLength)(e.slice(m+3));t+=g(e.slice(m+3,m+3+a)),m+=a-1,r=(0,u.buildMaximaFunctionString)("limit",t,i.variable,i.value,i.direction),m+=3;n+=r}()):"binom"===f.value?(v.debug('Found function "binomial"'),function(){var r="",t="",o="",i=e[m+1].type,a=e[m+2].type;if("group"!==i||"group"!==a)throw new Error("Binomial must have 2 following groups");t+=g(e[m+1].value),o+=g(e[m+2].value);r+=(0,u.buildMaximaFunctionString)("binomial",t,o),n+=r,m+=2}()):"sum"===f.value?(v.debug('Found function "sum"'),function(){var r="",t="",i=void 0,a=void 0,l="";if("_"!==e[m+1].value&&"^"!==e[m+1].value)throw new Error("Sum does not contain the correct number of arguments");var c=(0,s.handleUpperAndLowerArgsSum)(e.slice(m+1)),f=c.lowerLimit.value;a=c.upperLimit,m+=4,f=(0,s.handleLowerSumArguments)(f),l=f.variable,i=f.value,v.debug("Sum: arguments are form "+i+" to "+a);if(void 0===e[m+1])throw new Error("Missing argument in sum");var p=(0,o.getExpressionLength)(e.slice(m+1));t+=g(e.slice(m+1,m+1+p)),m+=p;r+=(0,u.buildMaximaFunctionString)("sum",t,l,i,a),n+=r}()):"integral"===f.value?(v.debug('Found function "integral"'),function(){var r="",t="",i=void 0,a=void 0,s="",c=void 0,f=!1;if((0,o.assertNotUndefined)(e[m+1],"Missing argument in integral"),"_"!==e[m+1].value&&"^"!==e[m+1].value)v.debug("Integral is symbolic"),f=!0,m++;else{var p=e.slice(m+1,m+5),d=(0,l.handleUpperAndLowerArgs)(p);i=d.lowerLimit,a=d.upperLimit,v.debug("Integration limits are from "+i+" to "+a),m+=5}var b=(0,l.findIntegralEnd)(e.slice(m));s+=b.variable,c=b.length;var y=e.slice(m,m+c);(0,o.assertNotUndefined)(y[y.length-1],"Missing argument in integral"),"*"===y[y.length-1].value&&y.splice(-1,1);t+=g(y),m+=c,r+=f?(0,u.buildMaximaFunctionString)("integrate",t,s):(0,u.buildMaximaFunctionString)("integrate",t,s,i,a);n+=r}()):(v.debug('Found normal "function"'),function(){var r="",t=!1,i=void 0,a=f.value;if((0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a),"^"===e[m+1].value){if(t=!0,(0,o.assertNotUndefined)(e[m+2],"Missing argument in function: "+a+"^"),i=g((0,u.wrapForTranspilation)(e[m+2])),i=(0,u.stripParenthesis)(i),"-1"===(0,u.stripAllParenthesis)(i)){if(v.debug("Function is inverse"),t=!1,!(0,d.isTrigonometricFunction)(a))throw new Error('Function "'+a+'" is not an trigonometric function');var l=(0,d.getInverseTrigonometricFunction)(a);if(null===l)throw new Error("No inverse trigonometric function found for "+a);a=l}m+=2}r+=a,t?(0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a+"^"+g((0,u.wrapForTranspilation)(e[m]))):(0,o.assertNotUndefined)(e[m+1],"Missing argument in function: "+a);var s=(0,o.getExpressionLength)(e.slice(m+1));r+=g((0,u.wrapForTranspilation)(e.slice(m+1,m+1+s))),m+=s-1,t&&(r="("+r+")^"+i);m++,n+=r}())}();break;case"environment":!function(){if("begin"===f.state){b(m,{type:"operator"});var r="",o=(0,t.environmentLength)(e.slice(m));"matrix"===f.value&&(v.debug("Found matrix environment"),r+=(0,a.handleMatrix)(e.slice(m+1,m+1+o))),m+=o+1,n+=r}else"end"===f.state&&m++}()}function b(t){var o=e[t-1],i=!0;if(t>0){for(var a=arguments.length,u=Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];u.forEach(function(e){var r=!0;for(var n in e)e.hasOwnProperty(n)&&o[n]!==e[n]&&(r=!1);!0===r&&(i=!1)}),r.addTimesSign&&i&&(v.debug("Adding * before "+f.type+": "+f.value+", previous item: "+e[t-1].type),n+="*")}}};m<e.length;m++)b();if(/(\([ ]*\))/.test(n+=")"))throw new Error("Syntax error");if(""===n)throw new Error("EMPTY");return n}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setOptions=i,r.getOptions=function(){return 0===Object.keys(t).length&&t.constructor===Object&&i(),Object.assign({},t)};var t={},o=r.DEFAULTS={onlySingleVariables:!1,handleEquation:!1,addTimesSign:!0,onlyGreekName:!1,onlyGreekSymbol:!1,debugging:!1};function i(e){t={},t=Object.assign(o,e),function(e){for(var r=0,n=0;n<e.length;n++)if(!0===o[e[n]]&&r++,r>1)throw new Error('Only one of the options: "'+e.join('", "')+'" can be set to "true"')}(["onlyGreekName","onlyGreekSymbol"])}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TOKEN_TYPES={WHITESPACE:{name:"WHITESPACE",symbol:" ",regex:/^\s+/},BACKSLASH:{name:"BACKSLASH",symbol:"\\",regex:/^[\\\\]$/},AMPERSAND:{name:"AMPERSAND",symbol:"&",regex:/^[&]$/},OPENING_BRACE:{name:"OPENING_BRACE",symbol:null,regex:/^[\{]$/},CLOSING_BRACE:{name:"CLOSING_BRACE",symbol:null,regex:/^[\}]$/},OPENING_PARENTHESES:{name:"OPENING_PARENTHESES",symbol:null,regex:/^[\(]$/},CLOSING_PARENTHESES:{name:"CLOSING_PARENTHESES",symbol:null,regex:/^[\)]$/},OPENING_BRACKET:{name:"BRACKET",symbol:null,regex:/^[\[]$/},CLOSING_BRACKET:{name:"BRACKET",symbol:null,regex:/^[\]]$/},NUMBER_LITERAL:{name:"NUMBER_LITERAL",symbol:null,regex:/^[0-9]+$/i},STRING_LITERAL:{name:"STRING_LITERAL",symbol:null,regex:/^[a-zA-Zα-ωΑ-Ω]+$/i},OPERATOR:{name:"OPERATOR",symbol:null,regex:/^[+\-*/=^_!]$/i}}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertNotUndefined=function(e,r){if(void 0===e)throw new Error(r)},r.getExpressionLength=function(e){var r=0;if("group"===e[0].type&&1===e.length)r=1;else{for(var n=0,t=!1;n<e.length&&!t;)"+"!==e[n].value&&"-"!==e[n].value&&"+-"!==e[n].value||(r=n,t=!0),n++;t||(r=e.length)}return r}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMacro=function(e){var r=!1;return void 0!==t.get(e)&&(r=!0),r},r.isIgnoredMacro=function(e){for(var r=!1,n=0;!r&&n<o.length;)e===o[n]&&(r=!0),n++;return r};var t=r.MACROS=new Map([["begin",null],["end",null],["to",null],["cdot",null],["times",null],["ast",null],["div",null],["mod",null],["pm",null],["frac",null],["infty","inf"],["operatorname",null]]),o=r.IGNORED_MACROS=["left","right"];r.MACROS_OVERRIDE=new Map([["cdot",{type:"operator",operatorType:"infix",value:"*"}],["times",{type:"operator",operatorType:"infix",value:"*"}],["ast",{type:"operator",operatorType:"infix",value:"*"}],["div",{type:"operator",operatorType:"infix",value:"/"}],["mod",{type:"operator",operatorType:"infix",value:"%"}],["pm",{type:"operator",operatorType:"infix",value:"+-"}]])},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TRIGONOMETRIC_FUNCTIONS=r.FUNCTIONS=void 0,r.isFunction=function(e){var r=!1;a(e)?r=!0:void 0!==o.get(e)&&(r=!0);return r},r.getFunctionName=function(e){var r=void 0;if(a(e))r=e;else if(null===(r=o.get(e)))r=e;else if(void 0===r)throw new Error("Not recognised function: "+r);return r},r.isTrigonometricFunction=a,r.getInverseTrigonometricFunction=function(e){t.debug('Getting the inverse of the function "'+e+'"');var r=void 0;for(var n in i)i[n].name===e?r=i[n].inverse:i[n].inverse===e&&(r=i[n].name);return void 0===r?null:(t.debug("- Found the inverse: "+r),r)};var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0)),o=r.FUNCTIONS=new Map([["lg",null],["log",null],["ln",null],["sqrt",null],["max",null],["min",null],["sum",null],["lim",null],["int","integral"],["binom",null],["arccos","acos"],["arccosh","acosh"],["arccot","acot"],["arccoth","acoth"],["arccsc","acsc"],["arccsch","acsch"],["arcsec","asec"],["arcsech","asech"],["arcsin","asin"],["arcsinh","asinh"],["arctan","atan"],["arctanh","atanh"]]),i=r.TRIGONOMETRIC_FUNCTIONS=[{name:"cos",inverse:"acos"},{name:"cosh",inverse:"acosh"},{name:"cot",inverse:"acot"},{name:"coth",inverse:"acoth"},{name:"csc",inverse:"acsc"},{name:"csch",inverse:"acsch"},{name:"sec",inverse:"asec"},{name:"sech",inverse:"asech"},{name:"sin",inverse:"asin"},{name:"sinh",inverse:"asinh"},{name:"tan",inverse:"atan"},{name:"tanh",inverse:"atanh"}];function a(e){var r=i.find(function(r){return r.name===e}),n=i.find(function(r){return r.inverse===e});return void 0!==r||void 0!==n}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.letters=void 0,r.toUpperCase=i,r.isUpperCase=a,r.getSymbol=function(e){var r=o.find(function(r){return r.name===e.toLowerCase()});return void 0===r?null:(r=r.symbol,a(e)&&(r=i(r)),r)},r.getName=function(e){var r=o.find(function(r){return r.symbol===e.toLowerCase()});return void 0===r?null:(r=r.name,a(e)&&(r=i(r)),r)},r.isGreekLetter=function(e){var r=o.find(function(r){return r.name===e.toLowerCase()}),n=o.find(function(r){return r.symbol===e.toLowerCase()});return void 0!==r||void 0!==n},r.convertSymbols=function(e){return t.debug("Converting math symbols "+e),o.forEach(function(r){e=(e=e.split(r.symbol).join(r.name)).split(i(r.symbol)).join(i(r.name))}),t.debug("- Converted math symbols "+e),e};var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0)),o=r.letters=[{name:"alpha",symbol:"α"},{name:"beta",symbol:"β"},{name:"gamma",symbol:"γ"},{name:"delta",symbol:"δ"},{name:"epsilon",symbol:"ϵ"},{name:"zeta",symbol:"ζ"},{name:"eta",symbol:"η"},{name:"theta",symbol:"θ"},{name:"iota",symbol:"ι"},{name:"kappa",symbol:"κ"},{name:"lambda",symbol:"λ"},{name:"mu",symbol:"μ"},{name:"nu",symbol:"ν"},{name:"omicron",symbol:"ο"},{name:"pi",symbol:"π"},{name:"rho",symbol:"ρ"},{name:"sigma",symbol:"σ"},{name:"tau",symbol:"τ"},{name:"upsilon",symbol:"υ"},{name:"phi",symbol:"ϕ"},{name:"chi",symbol:"χ"},{name:"psi",symbol:"ψ"},{name:"omega",symbol:"ω"}];function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return e.charAt(0).toUpperCase()===e.charAt(0)}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TeX2Max=void 0;var t=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0)),i=n(3),a=n(10),u=n(11),l=n(13),s=n(2),c=n(1);r.TeX2Max=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),(0,i.setOptions)(r),this.options=(0,i.getOptions)(),this.lastInput="",this.lastResult=""}return t(e,[{key:"getLastInput",value:function(){return this.lastInput()}},{key:"getLastResult",value:function(){return this.lastResult}},{key:"updateOptions",value:function(e){(0,i.setOptions)(e),this.options=(0,i.getOptions)()}},{key:"toMaxima",value:function(e){(0,i.setOptions)(this.options);var r=void 0;this.lastInput=e;var n=(0,a.scan)(e);o.debug(n);var t=(0,u.lex)(n);o.debug(t),this.structure=(0,l.parseLatex)(t),o.debug(this.structure);var f=(0,s.transpiler)(this.structure);return r=(0,c.stripParenthesis)(f),this.options.handleEquation&&(0,c.isEquation)(this.structure)&&(r="solve("+r+")"),this.lastResult=r,r}}]),e}()},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scan=function(e){var r=[];function n(e){r.push(e)}o.debug("\n------------------ SCANNER -> -------------------");for(var i=0;i<e.length;){var a=!1;for(var u in t.TOKEN_TYPES)t.TOKEN_TYPES.hasOwnProperty(u)&&e[i].match(t.TOKEN_TYPES[u].regex)&&(n(e[i]),a=!0);if(!a)throw new Error("Encountered unsupported character: "+e[i]);i++}return r};var t=n(4),o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0))},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.lex=function(e){var r=0,n=[],a=function(e){return n.push(e)},u=function(){return n};function l(e){if(void 0===e)return null;for(var r in t.TOKEN_TYPES)if(t.TOKEN_TYPES.hasOwnProperty(r)){var n=t.TOKEN_TYPES[r],o=n.regex;if(e.match(o))return n}return null}return function(){for(i.debug("\n------------------ LEXICAL ANALYSIS -> -------------------");r<e.length;){var n,t="",s=l(e[r]);i.debug("Consuming position: "+r+", char: "+e[r]),t=e[r++],void 0!==(n=new o.Token(s,t))&&a(n)}return u()}()};var t=n(4),o=n(12),i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0))},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Token=function e(r,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=n,this.type=r}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseLatex=function e(r){var n=(0,l.getOptions)();s.debug("\n------------------ PARSING -> -------------------");var d=0,g=[];function m(e){g.push(e)}function b(){return s.debug("Consuming position: "+d),r[d++].value}function y(){return s.debug("Skip token at position: "+d),r[d++].value}function h(){return r[d]?r[d].value:void 0}function E(){return r[d+1]?r[d+1].type.name:null}function w(){return s.debug("- Single number"),{type:"number",value:b()}}function S(){s.debug('- Found letter "'+h()+'"');var e="";return E()===a.TOKEN_TYPES.STRING_LITERAL.name?(s.debug(", continuing parsing"),e=b()+S(a.TOKEN_TYPES.STRING_LITERAL.name),s.debug("current word: "+e)):e=b(),s.debug("current sequence: "+e),e}function O(){s.debug("Parsing variable: "+r[d].value);var e="",t=d;if(e=S(),s.debug("current word: "+e),function(e){var r=!1;for(var n in s.debug("Checking "+e+" for reserved word"),u.RESERVED_WORDS)if(u.RESERVED_WORDS.hasOwnProperty(n)){u.RESERVED_WORDS[n].regex.test(e)&&(r=!0)}return r}(e)){s.debug("Variable contains reserved words");var o,i=function(e){var r="",n="";for(var t in u.RESERVED_WORDS)if(u.RESERVED_WORDS.hasOwnProperty(t)){var o=u.RESERVED_WORDS[t].regex;if(null!==e.match(o)){r=u.RESERVED_WORDS[t].type,n=o.exec(e);break}}return{type:r,value:n}}(e).value;if(o=i[0].length,s.debug("reserved word: "+i[0]+", length: "+o+", index "+i.index),i.index>0)if(d=t+i.index,e=e.substr(0,i.index),!0===n.onlySingleVariables&&!1===n.addTimesSign){if(e.length>1)throw new Error("The current options only allow for single variables")}else n.onlySingleVariables&&(d=t,e=b());else d=t+o,e=i[0]}else if(!0===n.onlySingleVariables&&!1===n.addTimesSign){if(e.length>1)throw new Error("The current options only allow for single variables")}else n.onlySingleVariables&&(d=t,e=b());return{type:"variable",value:e}}function T(){var t="";switch(h()){case f:t="curly";break;case v:t="normal";break;case p:t="square"}var o=function(e,r){s.debug("Finding matching bracket");var n="",t="";switch(r){case"normal":n="(",t=")";break;case"curly":n="{",t="}";break;case"square":n="[",t="]"}for(var o=0,i=0;i<e.length;i++){var a=e[i].value;if(s.debug("-- Char:"+a),a===n)o++,s.debug("-- Found starting bracket, depth "+o);else if(a===t){if(1===o)return s.debug("-- Found original closing bracket at position "+i),i;o--,s.debug("-- Found closing bracket, depth "+o)}}throw new Error("Brackets do not match up")}(r.slice(d),t);if(o instanceof Error)return o;var i=r.slice(d+1,d+o);return s.debug("New group created"),d+=o+1,{type:"group",symbol:t,value:e(i,n)}}function _(e){if(h()!==f)throw new Error("No argument for environments are present.");y();var r=S();if(y(),function(e){var r=i.environments.reduce(function(r,n){return r||n===e},!1);return s.debug("Is acknowledged environment?: "+r),r}(r)){if("begin"===e||"end"===e)return{type:"environment",state:e,value:r};throw new Error("environment state "+e+" is not valid")}throw new Error("Environment type "+r+" is not supported")}function x(e){return{type:"function",value:(0,o.getFunctionName)(e)}}function N(){var e=null;switch(r[d].type){case a.TOKEN_TYPES.NUMBER_LITERAL:s.debug('Found NUMBER_LITERAL "'+h()+'"'),e=function(){s.debug("Parsing number: "+r[d].value);var e=E(),n=function(){var e=r[d-1];return e?e.value:null}(),t=function(e){var r=g[g.length-1];return r?r.type:null}();return"^"!==n&&"_"!==n&&"function"!==t&&null!==e&&e===a.TOKEN_TYPES.NUMBER_LITERAL.name?(s.debug('- Found another number "'+r[d+1].value+'", continuing parsing'),{type:"number",value:w().value+N().value}):w()}();break;case a.TOKEN_TYPES.BACKSLASH:s.debug('Found BACKSLASH "'+h()+'"'),e=function(){if(s.debug("Found backslash"),E()===a.TOKEN_TYPES.BACKSLASH.name)return{type:"DOUBLE_BACKSLASH",value:b()+b()};if(d++,void 0===h())return null;if(function(e){var r=!1;return[" ","{","}","\\"].forEach(function(n){e===n&&(r=!0,s.debug(e+" is special char"))}),r}(h()))return function(e){var r=null;switch(h()){case" ":r=null;break;case"{":r=T();break;case"}":r=null;break;case"\\":r={type:"DOUBLE_BACKSLASH",value:b()+b()};break;default:return!1}return r}();var e=S();return"begin"===e?_("begin"):"end"===e?_("end"):"operatorname"===e?function(){var e;return y(),e=x(S()),y(),e}():(0,o.isFunction)(e)?x(e):function(e){var r=null,n=(0,t.isMacro)(e),o=(0,c.isGreekLetter)(e);if(n)void 0===(r=t.MACROS_OVERRIDE.get(e))&&(r={type:"token",value:e});else if(o)r={type:"token",value:e};else{if(!(0,t.isIgnoredMacro)(e))throw new Error("Encountered an unsupported macro: "+e);r=null}return r}(e)}();break;case a.TOKEN_TYPES.OPERATOR:s.debug('Found OPERATOR "'+h()+'"'),e=function(){s.debug("Found operator");var e=r[d];return/^[+\-*/=^_]$/i.test(e.value)?{type:"operator",operatorType:"infix",value:b()}:/^[]$/i.test(e.value)?{type:"operator",operatorType:"prefix",value:b()}:/^[!]$/i.test(e.value)?{type:"operator",operatorType:"postfix",value:b()}:void 0}();break;case a.TOKEN_TYPES.STRING_LITERAL:s.debug('Found STRING_LITERAL "'+h()+'"'),e=O();break;case a.TOKEN_TYPES.OPENING_BRACE:case a.TOKEN_TYPES.OPENING_PARENTHESES:case a.TOKEN_TYPES.OPENING_BRACKET:s.debug('Found BRACKET "'+h()+'"'),e=T();break;default:d++}return e}return function(){for(var e=0;d<r.length;){s.debug("--------- Parsing next token. While loop run: "+e+" ---------");var n=N();if(null!==n){if(void 0===n)throw d=r.length,new Error("node is undefined");if(m(n),s.debug("Parsed result type: "+n.type),++e>1e3)throw new Error("Max count reached, infinite loop encountered.")}}return s.debug("--------- End of while loop. Tokens position: "+(d-1)+" of "+(r.length-1)+" ---------"),g}()};var t=n(6),o=n(7),i=n(14),a=n(4),u=n(15),l=n(3),s=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0)),c=n(8),f="{",v="(",p="["},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.environments=["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix"]},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RESERVED_WORDS={INTEGRATION_END:{name:"INTEGRATION_END",symbol:null,regex:/(d)[A-z]/,type:"integral_end"}}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.environmentLength=function(e){for(var r=0,n=0;n<e.length;n++)if("environment"===e[n].type&&"begin"===e[n].state)r++,t.debug('-- Found new "begin" environment, depth '+r);else if("environment"===e[n].type&&"end"===e[n].state){if(1===r)return t.debug("-- Found original environment end at position "+n),n-1;r--,t.debug('-- Found environment "end", depth '+r)}throw new Error('Environments "begin" and "end" doesn\'t match up')};var t=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0))},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleMatrix=function(e){var r="";r+="matrix(";for(var n=[],a=[],u=0;u<e.length;u++){(0,i.assertNotUndefined)(e[u],"Missing argument in matrix"),"DOUBLE_BACKSLASH"===e[u].type?(n.push(a),a=[]):a.push((0,t.transpiler)((0,o.wrapForTranspilation)(e[u])))}n.push(a);for(var l=n[0].length,s=0;s<n.length;s++){if(n[s].length!==l)throw new Error("All rows in matrix must be the same length");0!==s&&(r+=","),r+="["+n[s].toString()+"]"}return r+")"};var t=n(2),o=n(1),i=n(5)},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findIntegralEnd=function(e){i.debug("Finding end of integral");for(var r=1,n="",t=0;t<e.length;t++){var o=e[t].value;if(i.debug("-- Char:"+o),"function"===e[t].type&&"integral"===e[t].value)r++,i.debug("-- Found starting integral, depth "+r);else if("variable"===e[t].type&&"d"===o[0]){var a=o.match(/(d)[A-z]/g);if(null!==a&&a.length>=1){if(1===r)return n=o.substring(1),i.debug("-- Found end of original integral at position "+t),{length:t,variable:n};r--,i.debug("-- Found integral end, depth "+r)}}}throw new Error("No end of integral located")},r.handleUpperAndLowerArgs=function(e){for(var r=void 0,n=void 0,i=0,a=0;a<2;a++)if("_"===e[i+a].value)i++,r=(0,t.transpiler)((0,o.wrapForTranspilation)(e[i+a]));else{if("^"!==e[i+a].value)throw new Error("Finite integral must have both upper and lower limits");i++,n=(0,t.transpiler)((0,o.wrapForTranspilation)(e[i+a]))}return{lowerLimit:r,upperLimit:n}};var t=n(2),o=n(1),i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0))},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleUpperAndLowerArgsSum=function(e){for(var r=void 0,n=void 0,i=0,a=0;a<2;a++)if("_"===e[i+a].value)r=e[++i+a];else{if("^"!==e[i+a].value)throw new Error("Finite integral must have both upper and lover limits");i++,n=(0,t.transpiler)((0,o.wrapForTranspilation)(e[i+a]))}return{lowerLimit:r,upperLimit:n}},r.handleLowerSumArguments=function(e){(0,i.assertNotUndefined)(e[0],"Missing index");var r=e[0];(0,i.assertNotUndefined)(e[1],"Index must be assigned. Missing equal sign");var n=e[1].value;if(!(0,o.checkForVariable)(r))throw new Error("Index must be a variable");if("="!==n)throw new Error("Index must be assigned. Missing equal sign");var a=e.slice(2),u="";return u+=(0,t.transpiler)((0,o.wrapForTranspilation)(a)),{variable:r.value,value:u}};var t=n(2),o=n(1),i=n(5)},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleLimitArguments=function(e){if(!(0,t.checkForVariable)(e[0]))throw new Error('Limit: "From" argument must be a symbol');if(!(0,t.searchForOccurrence)(e[1],"value","to",!1).isPresent)throw new Error('Limit: no "to" token provided');if(void 0===e[2])throw new Error('Limit: "To" argument missing');var r=e[0].value,n=e.slice(2),i="";return{variable:r,value:i+=(0,o.transpiler)((0,t.wrapForTranspilation)(n)),direction:a(e.slice(2))}},r.isOneSidedLimit=a;var t=n(1),o=n(2),i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}(n(0));function a(e){i.debug("Checking if limit is one sided");for(var r=!1,n="",t="",o=0;o<e.length;o++){if("group"===e[o].type){var u=a(e[o].value);!1!==u&&(r=!0,t=u)}("+"===e[o].value||"-"===e[o].value)&&o+1>=e.length&&(r=!0,n=e[o].value)}return r?(t="+"===n?"plus":"minus",i.debug("- Limit is one-sided from the "+t+" side")):i.debug("- Limit is not one-sided"),!!r&&t}}])});