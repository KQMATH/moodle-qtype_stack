define(["jquery","qtype_stack/validation-overlay"],function(t,i){"use strict";var n=function(t,i,n,a,e){this.questionid=t,this.prefix=i,this.inputdata=n,this.editorOptions=a,this.debug=e,this.name=n.input,this.$stackInput=null,this.validationOverlay=null,this.readonly=null,this._initValidation(),this._gatherStackInput()};return n.prototype.EDITOR_NAME="GENERIC",n.prototype._initValidation=function(){var n=this.inputdata.input,a=t("#"+t.escapeSelector(this.prefix+n)+"_val");a&&(this.validationOverlay=new i(a))},n.prototype._gatherStackInput=function(){var i=this.inputdata.input,n=t("#"+t.escapeSelector(this.prefix+i));n&&(this.$stackInput=n)},n.prototype._isReadonly=function(){var t=this.readonly;return null!=t?t:t=!!this.$stackInput.prop("readonly")},n.prototype.inputError=function(t){var i=this.getValidationOverlay();i&&i.displayErrorMessage(t)},n.prototype.getStackInput=function(){return this.$stackInput?this.$stackInput:null},n.prototype.valueChanged=function(t){var i=this.getValidationOverlay();i&&i.hide();var n=this.getStackInput();n.val(t),n.get(0).dispatchEvent(new Event("input")),""===t&&i.getUnderlay().addClass("empty")},n.prototype.getValidationOverlay=function(){return this.validationOverlay?this.validationOverlay:null},n});