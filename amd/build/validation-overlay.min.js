define(["jquery","core/str"],function(t,s){"use strict";var i=function(t){this.$validationDiv=t,this.id=this.$validationDiv.attr("id"),this.isShowing=!1,this.stringsPromise=this._retrieveStrings(),this.$overlay=this._createOverlay()};return i.prototype._createOverlay=function(){var s=t("<div>").attr({class:"stackinputfeedback empty",id:this.id+"_overlay"});return this.$validationDiv.after(s),s},i.prototype._retrieveStrings=function(){return s.get_strings([{key:"answerinvalid",component:"qtype_stack"}])},i.prototype.getUnderlay=function(){return this.$validationDiv},i.prototype._createStandardErrorMessage=function(s,i){var e=[],r=t("<p>");r.append(i),e.push(r);var a=t("<p>").attr({class:"stack_errors"});return a.append(s),e.push(a),e},i.prototype.displayMessage=function(t){this.$overlay.html(t)},i.prototype.displayErrorMessage=function(t){var s=this;this.stringsPromise.then(function(i){var e=s._createStandardErrorMessage(t,i);s.$overlay.empty().html(e),s.show()})},i.prototype.hide=function(){this.$validationDiv.css("display",""),this._removeAllClasses(),this.$overlay.addClass("empty"),this.isShowing=!1},i.prototype.show=function(){this.$validationDiv.hide(),this._removeAllClasses(),this.$overlay.css("display",""),this.isShowing=!0},i.prototype._showLoading=function(){this._removeAllClasses(),this.$validationDiv.addClass("loading")},i.prototype._showWaiting=function(){this._removeAllClasses(),this.$overlay.addClass("waiting")},i.prototype._removeAllClasses=function(){this.$overlay.removeClass("empty"),this.$overlay.removeClass("error"),this.$overlay.removeClass("loading"),this.$overlay.removeClass("waiting")},i});